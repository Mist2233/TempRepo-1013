- type: Database
  id: DB-FindUserByPhone
  description: 根据手机号查询用户是否存在。
  dependencies:
    - none
  acceptanceCriteria:
    - 如果手机号存在，返回用户信息。
    - 如果手机号不存在，返回空结果。
    - 查询操作不应修改任何数据。
  changeLog:
    - date: "2025-10-13"
      description: "初始创建。"

- type: Database
  id: DB-CreateUser
  description: 在数据库中创建一个新的用户记录。
  dependencies:
    - none
  acceptanceCriteria:
    - 成功执行后，users表中会增加一条新记录。
    - 如果手机号已存在，操作应失败并抛出唯一性约束错误。
    - 新用户记录应包含手机号和创建时间。
  changeLog:
    - date: "2025-10-13"
      description: "初始创建。"

- type: Database
  id: DB-CreateVerificationCode
  description: 为指定手机号生成并存储验证码。
  dependencies:
    - none
  acceptanceCriteria:
    - 生成6位数字验证码并存储到数据库。
    - 验证码有效期为60秒。
    - 如果该手机号已有未过期的验证码，应覆盖旧验证码。
    - 验证码应在控制台打印以便测试。
  changeLog:
    - date: "2025-10-13"
      description: "初始创建。"

- type: Database
  id: DB-VerifyCode
  description: 验证手机号和验证码的匹配性和有效性。
  dependencies:
    - none
  acceptanceCriteria:
    - 验证验证码是否与手机号匹配。
    - 验证验证码是否在有效期内（60秒）。
    - 验证成功后应删除或标记验证码为已使用。
    - 返回验证结果（成功/失败）。
  changeLog:
    - date: "2025-10-13"
      description: "初始创建。"

- type: Database
  id: DB-CleanExpiredCodes
  description: 清理过期的验证码记录。
  dependencies:
    - none
  acceptanceCriteria:
    - 删除所有超过60秒的验证码记录。
    - 操作应定期执行或在验证时触发。
    - 不应影响有效的验证码。
  changeLog:
    - date: "2025-10-13"
      description: "初始创建。"